### Hotel Booking API - Admin Hotel Controller Tests
### These tests can be used with VS Code REST Client extension or similar tools

@baseUrl = https://localhost:7001/api/AdminHotels
# Replace with your actual token
@adminToken = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

### 1. Add Room Availability
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 1,
  "roomId": 1,
  "startDate": "2024-03-01T00:00:00Z",
  "endDate": "2024-03-31T00:00:00Z",
  "availableRooms": 10,
  "pricePerNight": 150.00
}

### 2. Add Another Room Availability
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 1,
  "roomId": 2,
  "startDate": "2024-03-01T00:00:00Z",
  "endDate": "2024-03-31T00:00:00Z",
  "availableRooms": 20,
  "pricePerNight": 100.00
}

### 3. Get Room Availability by ID
GET {{baseUrl}}/room-availability/1
Authorization: {{adminToken}}

### 4. Get All Room Availabilities for Hotel
GET {{baseUrl}}/hotels/1/room-availabilities
Authorization: {{adminToken}}

### 5. Update Room Availability
PUT {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "availabilityId": 1,
  "availableRooms": 8,
  "pricePerNight": 175.00
}

### 6. Update Room Availability with Dates
PUT {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "availabilityId": 1,
  "startDate": "2024-03-01T00:00:00Z",
  "endDate": "2024-03-15T00:00:00Z",
  "availableRooms": 5,
  "pricePerNight": 200.00
}

### 7. Delete Room Availability
DELETE {{baseUrl}}/room-availability/1
Authorization: {{adminToken}}

### 8. Test without authentication (should fail with 401)
GET {{baseUrl}}/room-availability/1

### 9. Test with invalid date range (should fail with 400)
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 1,
  "roomId": 1,
  "startDate": "2024-03-31T00:00:00Z",
  "endDate": "2024-03-01T00:00:00Z",
  "availableRooms": 10,
  "pricePerNight": 150.00
}

### 10. Test with past date (should fail with 400)
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 1,
  "roomId": 1,
  "startDate": "2020-01-01T00:00:00Z",
  "endDate": "2020-01-31T00:00:00Z",
  "availableRooms": 10,
  "pricePerNight": 150.00
}

### 11. Test with non-existent hotel (should fail with 404)
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 999,
  "roomId": 1,
  "startDate": "2024-03-01T00:00:00Z",
  "endDate": "2024-03-31T00:00:00Z",
  "availableRooms": 10,
  "pricePerNight": 150.00
}

### 12. Test overlapping availability (should fail with 400)
# First, add availability
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 1,
  "roomId": 3,
  "startDate": "2024-04-01T00:00:00Z",
  "endDate": "2024-04-30T00:00:00Z",
  "availableRooms": 10,
  "pricePerNight": 150.00
}

###
# Then try to add overlapping availability (should fail)
POST {{baseUrl}}/room-availability
Content-Type: application/json
Authorization: {{adminToken}}

{
  "hotelId": 1,
  "roomId": 3,
  "startDate": "2024-04-15T00:00:00Z",
  "endDate": "2024-05-15T00:00:00Z",
  "availableRooms": 5,
  "pricePerNight": 175.00
}
